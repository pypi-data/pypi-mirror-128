"use strict";(self.webpackChunkhome_assistant_frontend=self.webpackChunkhome_assistant_frontend||[]).push([[26127],{23682:function(t,n,e){function r(t,n){if(n.length<t)throw new TypeError(t+" argument"+(t>1?"s":"")+" required, but only "+n.length+" present")}e.d(n,{Z:function(){return r}})},90394:function(t,n,e){function r(t){if(null===t||!0===t||!1===t)return NaN;var n=Number(t);return isNaN(n)?n:n<0?Math.ceil(n):Math.floor(n)}e.d(n,{Z:function(){return r}})},79021:function(t,n,e){e.d(n,{Z:function(){return a}});var r=e(90394),o=e(34327),i=e(23682);function a(t,n){(0,i.Z)(2,arguments);var e=(0,o.Z)(t),a=(0,r.Z)(n);return isNaN(a)?new Date(NaN):a?(e.setDate(e.getDate()+a),e):e}},59699:function(t,n,e){e.d(n,{Z:function(){return u}});var r=e(90394),o=e(39244),i=e(23682),a=36e5;function u(t,n){(0,i.Z)(2,arguments);var e=(0,r.Z)(n);return(0,o.Z)(t,e*a)}},39244:function(t,n,e){e.d(n,{Z:function(){return a}});var r=e(90394),o=e(34327),i=e(23682);function a(t,n){(0,i.Z)(2,arguments);var e=(0,o.Z)(t).getTime(),a=(0,r.Z)(n);return new Date(e+a)}},32182:function(t,n,e){e.d(n,{Z:function(){return a}});var r=e(90394),o=e(34327),i=e(23682);function a(t,n){(0,i.Z)(2,arguments);var e=(0,o.Z)(t),a=(0,r.Z)(n);if(isNaN(a))return new Date(NaN);if(!a)return e;var u=e.getDate(),c=new Date(e.getTime());c.setMonth(e.getMonth()+a+1,0);var f=c.getDate();return u>=f?c:(e.setFullYear(c.getFullYear(),c.getMonth(),u),e)}},93752:function(t,n,e){e.d(n,{Z:function(){return i}});var r=e(34327),o=e(23682);function i(t){(0,o.Z)(1,arguments);var n=(0,r.Z)(t);return n.setHours(23,59,59,999),n}},70390:function(t,n,e){e.d(n,{Z:function(){return o}});var r=e(93752);function o(){return(0,r.Z)(Date.now())}},47538:function(t,n,e){function r(){var t=new Date,n=t.getFullYear(),e=t.getMonth(),r=t.getDate(),o=new Date(0);return o.setFullYear(n,e,r-1),o.setHours(23,59,59,999),o}e.d(n,{Z:function(){return r}})},59429:function(t,n,e){e.d(n,{Z:function(){return i}});var r=e(34327),o=e(23682);function i(t){(0,o.Z)(1,arguments);var n=(0,r.Z)(t);return n.setHours(0,0,0,0),n}},13250:function(t,n,e){e.d(n,{Z:function(){return i}});var r=e(34327),o=e(23682);function i(t){(0,o.Z)(1,arguments);var n=(0,r.Z)(t);return n.setDate(1),n.setHours(0,0,0,0),n}},27088:function(t,n,e){e.d(n,{Z:function(){return o}});var r=e(59429);function o(){return(0,r.Z)(Date.now())}},83008:function(t,n,e){function r(){var t=new Date,n=t.getFullYear(),e=t.getMonth(),r=t.getDate(),o=new Date(0);return o.setFullYear(n,e,r-1),o.setHours(0,0,0,0),o}e.d(n,{Z:function(){return r}})},34327:function(t,n,e){e.d(n,{Z:function(){return i}});var r=e(23682);function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}function i(t){(0,r.Z)(1,arguments);var n=Object.prototype.toString.call(t);return t instanceof Date||"object"===o(t)&&"[object Date]"===n?new Date(t.getTime()):"number"==typeof t||"[object Number]"===n?new Date(t):("string"!=typeof t&&"[object String]"!==n||"undefined"==typeof console||(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://git.io/fjule"),console.warn((new Error).stack)),new Date(NaN))}},7323:function(t,n,e){e.d(n,{p:function(){return r}});var r=function(t,n){return t&&t.config.components.includes(n)}},33897:function(t,n,e){e.d(n,{q:function(){return o}});var r=e(58831),o=function(t){var n=[],e={};return Object.keys(t).forEach((function(o){var i=t[o];"group"===(0,r.M)(o)?n.push(i):e[o]=i})),n.forEach((function(t){return t.attributes.entity_id.forEach((function(t){delete e[t]}))})),{groups:n,ungrouped:e}}},34007:function(t,n,e){e.d(n,{N:function(){return r}});var r=function(t,n){if(t.toLowerCase().startsWith(n)){var e=t.substring(n.length);return o(e.substr(0,e.indexOf(" ")))?e:e[0].toUpperCase()+e.slice(1)}},o=function(t){return t.toLowerCase()!==t}},57066:function(t,n,e){e.d(n,{Lo:function(){return a},IO:function(){return u},qv:function(){return c},sG:function(){return l}});var r=e(97330),o=e(85415),i=e(38346),a=function(t,n){return t.callWS(Object.assign({type:"config/area_registry/create"},n))},u=function(t,n,e){return t.callWS(Object.assign({type:"config/area_registry/update",area_id:n},e))},c=function(t,n){return t.callWS({type:"config/area_registry/delete",area_id:n})},f=function(t){return t.sendMessagePromise({type:"config/area_registry/list"}).then((function(t){return t.sort((function(t,n){return(0,o.$)(t.name,n.name)}))}))},s=function(t,n){return t.subscribeEvents((0,i.D)((function(){return f(t).then((function(t){return n.setState(t,!0)}))}),500,!0),"area_registry_updated")},l=function(t,n){return(0,r.B)("_areaRegistry",f,s,t,n)}},57292:function(t,n,e){e.d(n,{jL:function(){return c},t1:function(){return f},_Y:function(){return s},q4:function(){return p}});var r=e(97330),o=e(91741),i=e(38346);function a(t,n){var e="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!e){if(Array.isArray(t)||(e=function(t,n){if(!t)return;if("string"==typeof t)return u(t,n);var e=Object.prototype.toString.call(t).slice(8,-1);"Object"===e&&t.constructor&&(e=t.constructor.name);if("Map"===e||"Set"===e)return Array.from(t);if("Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return u(t,n)}(t))||n&&t&&"number"==typeof t.length){e&&(t=e);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){e=e.call(t)},n:function(){var t=e.next();return a=t.done,t},e:function(t){c=!0,i=t},f:function(){try{a||null==e.return||e.return()}finally{if(c)throw i}}}}function u(t,n){(null==n||n>t.length)&&(n=t.length);for(var e=0,r=new Array(n);e<n;e++)r[e]=t[e];return r}var c=function(t,n,e){return t.name_by_user||t.name||e&&function(t,n){var e,r=a(n||[]);try{for(r.s();!(e=r.n()).done;){var i=e.value,u="string"==typeof i?i:i.entity_id,c=t.states[u];if(c)return(0,o.C)(c)}}catch(f){r.e(f)}finally{r.f()}}(n,e)||n.localize("ui.panel.config.devices.unnamed_device")},f=function(t,n,e){return t.callWS(Object.assign({type:"config/device_registry/update",device_id:n},e))},s=function(t){return t.sendMessagePromise({type:"config/device_registry/list"})},l=function(t,n){return t.subscribeEvents((0,i.D)((function(){return s(t).then((function(t){return n.setState(t,!0)}))}),500,!0),"device_registry_updated")},p=function(t,n){return(0,r.B)("_dr",s,l,t,n)}},65253:function(t,n,e){function r(t,n,e,r,o,i,a){try{var u=t[i](a),c=u.value}catch(f){return void e(f)}u.done?n(c):Promise.resolve(c).then(r,o)}function o(t){return function(){var n=this,e=arguments;return new Promise((function(o,i){var a=t.apply(n,e);function u(t){r(a,o,i,u,c,"next",t)}function c(t){r(a,o,i,u,c,"throw",t)}u(void 0)}))}}e.d(n,{Pb:function(){return i},CE:function(){return a},uh:function(){return u},r4:function(){return c},Nq:function(){return f},h8:function(){return s},fm:function(){return l}});var i="system-admin",a="system-users",u=function(){var t=o(regeneratorRuntime.mark((function t(n){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",n.callWS({type:"config/auth/list"}));case 1:case"end":return t.stop()}}),t)})));return function(n){return t.apply(this,arguments)}}(),c=function(){var t=o(regeneratorRuntime.mark((function t(n,e,r){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",n.callWS({type:"config/auth/create",name:e,group_ids:r}));case 1:case"end":return t.stop()}}),t)})));return function(n,e,r){return t.apply(this,arguments)}}(),f=function(){var t=o(regeneratorRuntime.mark((function t(n,e,r){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",n.callWS(Object.assign({},r,{type:"config/auth/update",user_id:e})));case 1:case"end":return t.stop()}}),t)})));return function(n,e,r){return t.apply(this,arguments)}}(),s=function(){var t=o(regeneratorRuntime.mark((function t(n,e){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",n.callWS({type:"config/auth/delete",user_id:e}));case 1:case"end":return t.stop()}}),t)})));return function(n,e){return t.apply(this,arguments)}}(),l=function(t){return t?t.trim().split(" ").slice(0,3).map((function(t){return t.substr(0,1)})).join(""):"?"}},23197:function(t,n,e){e.d(n,{VG:function(){return b},AP:function(){return w}});var r=e(58831),o=e(22311),i=e(91741),a=e(33897),u=e(34007),c=e(85415),f=e(5986),s=e(41499),l=e(65253);function p(t){return function(t){if(Array.isArray(t))return h(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||v(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(t,n){return function(t){if(Array.isArray(t))return t}(t)||function(t,n){var e=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==e)return;var r,o,i=[],a=!0,u=!1;try{for(e=e.call(t);!(a=(r=e.next()).done)&&(i.push(r.value),!n||i.length!==n);a=!0);}catch(c){u=!0,o=c}finally{try{a||null==e.return||e.return()}finally{if(u)throw o}}return i}(t,n)||v(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(t,n){var e="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!e){if(Array.isArray(t)||(e=v(t))||n&&t&&"number"==typeof t.length){e&&(t=e);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){e=e.call(t)},n:function(){var t=e.next();return a=t.done,t},e:function(t){u=!0,i=t},f:function(){try{a||null==e.return||e.return()}finally{if(u)throw i}}}}function v(t,n){if(t){if("string"==typeof t)return h(t,n);var e=Object.prototype.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?h(t,n):void 0}}function h(t,n){(null==n||n>t.length)&&(n=t.length);for(var e=0,r=new Array(n);e<n;e++)r[e]=t[e];return r}var m=new Set(["automation","configurator","device_tracker","geo_location","persistent_notification","script","sun","zone"]),g=new Set(["mobile_app"]),b=function(t,n){var e,o=[],a=[],c=n.title?"".concat(n.title," ").toLowerCase():void 0,f=d(t);try{for(f.s();!(e=f.n()).done;){var l=y(e.value,2),p=l[0],v=l[1],h=(0,r.M)(p);if("alarm_control_panel"===h){var m={type:"alarm-panel",entity:p};o.push(m)}else if("camera"===h){var g={type:"picture-entity",entity:p};o.push(g)}else if("climate"===h){var b={type:"thermostat",entity:p};o.push(b)}else if("humidifier"===h){var w={type:"humidifier",entity:p};o.push(w)}else if("media_player"===h){var _={type:"media-control",entity:p};o.push(_)}else if("plant"===h){var S={type:"plant-status",entity:p};o.push(S)}else if("weather"===h){var Z={type:"weather-forecast",entity:p,show_forecast:!1};o.push(Z)}else if("sensor"===h&&(null==v?void 0:v.attributes.device_class)===s.A);else{var E=void 0,j=c&&v&&(E=(0,u.N)((0,i.C)(v),c))?{entity:p,name:E}:p;a.push(j)}}}catch(k){f.e(k)}finally{f.f()}return a.length>0&&o.unshift(Object.assign({type:"entities",entities:a},n)),o.length<2?o:[{type:"grid",square:!1,columns:1,cards:o}]},w=function(t,n,e,r,u,s){var v,h=function(t,n){var e={},r=new Set(n.filter((function(t){return t.entity_category||g.has(t.platform)})).map((function(t){return t.entity_id})));return Object.keys(t).forEach((function(n){var i=t[n];m.has((0,o.N)(i))||r.has(i.entity_id)||(e[n]=t[n])})),e}(r,e),w={};Object.keys(h).forEach((function(t){var n=h[t];n.attributes.order&&(w[t]=n.attributes.order)}));var _=function(t,n,e,r){var o,i=Object.assign({},r),a=[],u=d(t);try{var c=function(){var t,r=o.value,u=[],c=new Set(n.filter((function(t){return t.area_id===r.area_id})).map((function(t){return t.id}))),f=d(e);try{for(f.s();!(t=f.n()).done;){var s=t.value;(c.has(s.device_id)&&!s.area_id||s.area_id===r.area_id)&&s.entity_id in i&&(u.push(i[s.entity_id]),delete i[s.entity_id])}}catch(l){f.e(l)}finally{f.f()}u.length>0&&a.push([r,u])};for(u.s();!(o=u.n()).done;)c()}catch(f){u.e(f)}finally{u.f()}return{areasWithEntities:a,otherEntities:i}}(t,n,e,h),S=function(t,n,e,r,u,s){var p=(0,a.q)(u);p.groups.sort((function(t,n){return s[t.entity_id]-s[n.entity_id]}));var y={};Object.keys(p.ungrouped).forEach((function(t){var n=p.ungrouped[t],e=(0,o.N)(n);e in y||(y[e]=[]),y[e].push(n.entity_id)}));var v=[];if("person"in y){var h=[];if(1===y.person.length)v.push({type:"entities",entities:y.person});else{var m,g,w="",_=d(y.person);try{for(_.s();!(g=_.n()).done;){var S=g.value,Z=u[S],E=Z.attributes.entity_picture;if(!E){if(void 0===m){var j=getComputedStyle(document.body);m=encodeURIComponent(j.getPropertyValue("--light-primary-color").trim()),w=encodeURIComponent((j.getPropertyValue("--text-light-primary-color")||j.getPropertyValue("--primary-text-color")).trim())}var k=(0,l.fm)(Z.attributes.friendly_name||"");E="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 50 50' width='50' height='50' style='background-color:".concat(m,"'%3E%3Cg%3E%3Ctext font-family='roboto' x='50%25' y='50%25' text-anchor='middle' stroke='").concat(w,"' font-size='1.3em' dy='.3em'%3E").concat(k,"%3C/text%3E%3C/g%3E%3C/svg%3E")}h.push({type:"picture-entity",entity:S,aspect_ratio:"1",show_name:!1,image:E})}}catch(A){_.e(A)}finally{_.f()}v.push({type:"grid",square:!0,columns:3,cards:h})}delete y.person}p.groups.forEach((function(t){v=v.concat(b(t.attributes.entity_id.map((function(t){return[t,u[t]]})),{title:(0,i.C)(t),show_header_toggle:"hidden"!==t.attributes.control}))})),Object.keys(y).sort().forEach((function(n){v=v.concat(b(y[n].sort((function(t,n){return(0,c.$)((0,i.C)(u[t]),(0,i.C)(u[n]))})).map((function(t){return[t,u[t]]})),{title:(0,f.Lh)(t,n)}))}));var x={path:n,title:e,cards:v};return r&&(x.icon=r),x}(u,"default_view","Home",undefined,_.otherEntities,w),Z=[];if(_.areasWithEntities.forEach((function(t){var n=y(t,2),e=n[0],r=n[1];Z.push.apply(Z,p(b(r.map((function(t){return[t.entity_id,t]})),{title:e.name})))})),s){var E=s.energy_sources.find((function(t){return"grid"===t.type}));E&&E.flow_from.length>0&&Z.push({title:"Energy distribution today",type:"energy-distribution",link_dashboard:!0})}return(v=S.cards).unshift.apply(v,Z),S}},76478:function(t,n,e){e.r(n),e.d(n,{OriginalStatesStrategy:function(){return m}});var r=e(28101),o=e(7323),i=e(11950),a=e(57066),u=e(57292),c=e(55424),f=e(74186),s=e(23197);function l(t,n){return function(t){if(Array.isArray(t))return t}(t)||function(t,n){var e=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==e)return;var r,o,i=[],a=!0,u=!1;try{for(e=e.call(t);!(a=(r=e.next()).done)&&(i.push(r.value),!n||i.length!==n);a=!0);}catch(c){u=!0,o=c}finally{try{a||null==e.return||e.return()}finally{if(u)throw o}}return i}(t,n)||function(t,n){if(!t)return;if("string"==typeof t)return p(t,n);var e=Object.prototype.toString.call(t).slice(8,-1);"Object"===e&&t.constructor&&(e=t.constructor.name);if("Map"===e||"Set"===e)return Array.from(t);if("Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return p(t,n)}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(t,n){(null==n||n>t.length)&&(n=t.length);for(var e=0,r=new Array(n);e<n;e++)r[e]=t[e];return r}function y(t,n,e,r,o,i,a){try{var u=t[i](a),c=u.value}catch(f){return void e(f)}u.done?n(c):Promise.resolve(c).then(r,o)}function d(t){return function(){var n=this,e=arguments;return new Promise((function(r,o){var i=t.apply(n,e);function a(t){y(i,r,o,a,u,"next",t)}function u(t){y(i,r,o,a,u,"throw",t)}a(void 0)}))}}function v(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var h=!1,m=function(){function t(){!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,t)}var n,e,p,y,m;return n=t,e=null,p=[{key:"generateView",value:(m=d(regeneratorRuntime.mark((function t(n){var e,p,y,d,v,m,g,b,w,_;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if((e=n.hass).config.state!==r.UE){t.next=3;break}return t.abrupt("return",{cards:[{type:"starting"}]});case 3:if(!e.config.safe_mode){t.next=5;break}return t.abrupt("return",{cards:[{type:"safe-mode"}]});case 5:return h||(h=!0,(0,a.sG)(e.connection,(function(){})),(0,u.q4)(e.connection,(function(){})),(0,f.LM)(e.connection,(function(){}))),(0,o.p)(e,"energy")&&(p=(0,c.ZC)(e)),t.next=9,Promise.all([(0,i.l)(e.connection,a.sG),(0,i.l)(e.connection,u.q4),(0,i.l)(e.connection,f.LM),e.loadBackendTranslation("title")]);case 9:if(y=t.sent,d=l(y,4),v=d[0],m=d[1],g=d[2],b=d[3],!p){t.next=24;break}return t.prev=16,t.next=19,p;case 19:w=t.sent,t.next=24;break;case 22:t.prev=22,t.t0=t.catch(16);case 24:return _=(0,s.AP)(v,m,g,e.states,b,w),e.config.components.includes("geo_location")&&_&&_.cards&&_.cards.push({type:"map",geo_location_sources:["all"]}),0===_.cards.length&&_.cards.push({type:"empty-state"}),t.abrupt("return",_);case 28:case"end":return t.stop()}}),t,null,[[16,22]])}))),function(t){return m.apply(this,arguments)})},{key:"generateDashboard",value:(y=d(regeneratorRuntime.mark((function t(n){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",{title:n.hass.config.location_name,views:[{strategy:{type:"original-states"}}]});case 1:case"end":return t.stop()}}),t)}))),function(t){return y.apply(this,arguments)})}],e&&v(n.prototype,e),p&&v(n,p),t}()}}]);