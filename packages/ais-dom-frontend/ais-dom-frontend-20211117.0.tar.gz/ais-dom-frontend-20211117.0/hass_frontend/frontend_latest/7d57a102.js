"use strict";(self.webpackChunkhome_assistant_frontend=self.webpackChunkhome_assistant_frontend||[]).push([[26127],{23682:(t,e,n)=>{function r(t,e){if(e.length<t)throw new TypeError(t+" argument"+(t>1?"s":"")+" required, but only "+e.length+" present")}n.d(e,{Z:()=>r})},90394:(t,e,n)=>{function r(t){if(null===t||!0===t||!1===t)return NaN;var e=Number(t);return isNaN(e)?e:e<0?Math.ceil(e):Math.floor(e)}n.d(e,{Z:()=>r})},79021:(t,e,n)=>{n.d(e,{Z:()=>i});var r=n(90394),s=n(34327),a=n(23682);function i(t,e){(0,a.Z)(2,arguments);var n=(0,s.Z)(t),i=(0,r.Z)(e);return isNaN(i)?new Date(NaN):i?(n.setDate(n.getDate()+i),n):n}},59699:(t,e,n)=>{n.d(e,{Z:()=>o});var r=n(90394),s=n(39244),a=n(23682),i=36e5;function o(t,e){(0,a.Z)(2,arguments);var n=(0,r.Z)(e);return(0,s.Z)(t,n*i)}},39244:(t,e,n)=>{n.d(e,{Z:()=>i});var r=n(90394),s=n(34327),a=n(23682);function i(t,e){(0,a.Z)(2,arguments);var n=(0,s.Z)(t).getTime(),i=(0,r.Z)(e);return new Date(n+i)}},32182:(t,e,n)=>{n.d(e,{Z:()=>i});var r=n(90394),s=n(34327),a=n(23682);function i(t,e){(0,a.Z)(2,arguments);var n=(0,s.Z)(t),i=(0,r.Z)(e);if(isNaN(i))return new Date(NaN);if(!i)return n;var o=n.getDate(),c=new Date(n.getTime());c.setMonth(n.getMonth()+i+1,0);var u=c.getDate();return o>=u?c:(n.setFullYear(c.getFullYear(),c.getMonth(),o),n)}},93752:(t,e,n)=>{n.d(e,{Z:()=>a});var r=n(34327),s=n(23682);function a(t){(0,s.Z)(1,arguments);var e=(0,r.Z)(t);return e.setHours(23,59,59,999),e}},70390:(t,e,n)=>{n.d(e,{Z:()=>s});var r=n(93752);function s(){return(0,r.Z)(Date.now())}},47538:(t,e,n)=>{function r(){var t=new Date,e=t.getFullYear(),n=t.getMonth(),r=t.getDate(),s=new Date(0);return s.setFullYear(e,n,r-1),s.setHours(23,59,59,999),s}n.d(e,{Z:()=>r})},59429:(t,e,n)=>{n.d(e,{Z:()=>a});var r=n(34327),s=n(23682);function a(t){(0,s.Z)(1,arguments);var e=(0,r.Z)(t);return e.setHours(0,0,0,0),e}},13250:(t,e,n)=>{n.d(e,{Z:()=>a});var r=n(34327),s=n(23682);function a(t){(0,s.Z)(1,arguments);var e=(0,r.Z)(t);return e.setDate(1),e.setHours(0,0,0,0),e}},27088:(t,e,n)=>{n.d(e,{Z:()=>s});var r=n(59429);function s(){return(0,r.Z)(Date.now())}},83008:(t,e,n)=>{function r(){var t=new Date,e=t.getFullYear(),n=t.getMonth(),r=t.getDate(),s=new Date(0);return s.setFullYear(e,n,r-1),s.setHours(0,0,0,0),s}n.d(e,{Z:()=>r})},34327:(t,e,n)=>{n.d(e,{Z:()=>s});var r=n(23682);function s(t){(0,r.Z)(1,arguments);var e=Object.prototype.toString.call(t);return t instanceof Date||"object"==typeof t&&"[object Date]"===e?new Date(t.getTime()):"number"==typeof t||"[object Number]"===e?new Date(t):("string"!=typeof t&&"[object String]"!==e||"undefined"==typeof console||(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://git.io/fjule"),console.warn((new Error).stack)),new Date(NaN))}},7323:(t,e,n)=>{n.d(e,{p:()=>r});const r=(t,e)=>t&&t.config.components.includes(e)},33897:(t,e,n)=>{n.d(e,{q:()=>s});var r=n(58831);const s=t=>{const e=[],n={};return Object.keys(t).forEach((s=>{const a=t[s];"group"===(0,r.M)(s)?e.push(a):n[s]=a})),e.forEach((t=>t.attributes.entity_id.forEach((t=>{delete n[t]})))),{groups:e,ungrouped:n}}},34007:(t,e,n)=>{n.d(e,{N:()=>r});const r=(t,e)=>{if(!t.toLowerCase().startsWith(e))return;const n=t.substring(e.length);return s(n.substr(0,n.indexOf(" ")))?n:n[0].toUpperCase()+n.slice(1)},s=t=>t.toLowerCase()!==t},57066:(t,e,n)=>{n.d(e,{Lo:()=>i,IO:()=>o,qv:()=>c,sG:()=>d});var r=n(97330),s=n(85415),a=n(38346);const i=(t,e)=>t.callWS({type:"config/area_registry/create",...e}),o=(t,e,n)=>t.callWS({type:"config/area_registry/update",area_id:e,...n}),c=(t,e)=>t.callWS({type:"config/area_registry/delete",area_id:e}),u=t=>t.sendMessagePromise({type:"config/area_registry/list"}).then((t=>t.sort(((t,e)=>(0,s.$)(t.name,e.name))))),l=(t,e)=>t.subscribeEvents((0,a.D)((()=>u(t).then((t=>e.setState(t,!0)))),500,!0),"area_registry_updated"),d=(t,e)=>(0,r.B)("_areaRegistry",u,l,t,e)},57292:(t,e,n)=>{n.d(e,{jL:()=>i,t1:()=>o,_Y:()=>c,q4:()=>l});var r=n(97330),s=n(91741),a=n(38346);const i=(t,e,n)=>t.name_by_user||t.name||n&&((t,e)=>{for(const n of e||[]){const e="string"==typeof n?n:n.entity_id,r=t.states[e];if(r)return(0,s.C)(r)}})(e,n)||e.localize("ui.panel.config.devices.unnamed_device"),o=(t,e,n)=>t.callWS({type:"config/device_registry/update",device_id:e,...n}),c=t=>t.sendMessagePromise({type:"config/device_registry/list"}),u=(t,e)=>t.subscribeEvents((0,a.D)((()=>c(t).then((t=>e.setState(t,!0)))),500,!0),"device_registry_updated"),l=(t,e)=>(0,r.B)("_dr",c,u,t,e)},65253:(t,e,n)=>{n.d(e,{Pb:()=>r,CE:()=>s,uh:()=>a,r4:()=>i,Nq:()=>o,h8:()=>c,fm:()=>u});const r="system-admin",s="system-users",a=async t=>t.callWS({type:"config/auth/list"}),i=async(t,e,n)=>t.callWS({type:"config/auth/create",name:e,group_ids:n}),o=async(t,e,n)=>t.callWS({...n,type:"config/auth/update",user_id:e}),c=async(t,e)=>t.callWS({type:"config/auth/delete",user_id:e}),u=t=>t?t.trim().split(" ").slice(0,3).map((t=>t.substr(0,1))).join(""):"?"},23197:(t,e,n)=>{n.d(e,{VG:()=>y,AP:()=>g});var r=n(58831),s=n(22311),a=n(91741),i=n(33897),o=n(34007),c=n(85415),u=n(5986),l=n(41499),d=n(65253);const p=new Set(["automation","configurator","device_tracker","geo_location","persistent_notification","script","sun","zone"]),f=new Set(["mobile_app"]),y=(t,e)=>{const n=[],s=[],i=e.title?`${e.title} `.toLowerCase():void 0;for(const[e,c]of t){const t=(0,r.M)(e);if("alarm_control_panel"===t){const t={type:"alarm-panel",entity:e};n.push(t)}else if("camera"===t){const t={type:"picture-entity",entity:e};n.push(t)}else if("climate"===t){const t={type:"thermostat",entity:e};n.push(t)}else if("humidifier"===t){const t={type:"humidifier",entity:e};n.push(t)}else if("media_player"===t){const t={type:"media-control",entity:e};n.push(t)}else if("plant"===t){const t={type:"plant-status",entity:e};n.push(t)}else if("weather"===t){const t={type:"weather-forecast",entity:e,show_forecast:!1};n.push(t)}else if("sensor"===t&&(null==c?void 0:c.attributes.device_class)===l.A);else{let t;const n=i&&c&&(t=(0,o.N)((0,a.C)(c),i))?{entity:e,name:t}:e;s.push(n)}}return s.length>0&&n.unshift({type:"entities",entities:s,...e}),n.length<2?n:[{type:"grid",square:!1,columns:1,cards:n}]},g=(t,e,n,r,o,l)=>{const g=((t,e)=>{const n={},r=new Set(e.filter((t=>t.entity_category||f.has(t.platform))).map((t=>t.entity_id)));return Object.keys(t).forEach((e=>{const a=t[e];p.has((0,s.N)(a))||r.has(a.entity_id)||(n[e]=t[e])})),n})(r,n),h={};Object.keys(g).forEach((t=>{const e=g[t];e.attributes.order&&(h[t]=e.attributes.order)}));const m=((t,e,n,r)=>{const s={...r},a=[];for(const r of t){const t=[],i=new Set(e.filter((t=>t.area_id===r.area_id)).map((t=>t.id)));for(const e of n)(i.has(e.device_id)&&!e.area_id||e.area_id===r.area_id)&&e.entity_id in s&&(t.push(s[e.entity_id]),delete s[e.entity_id]);t.length>0&&a.push([r,t])}return{areasWithEntities:a,otherEntities:s}})(t,e,n,g),_=((t,e,n,r,o,l)=>{const p=(0,i.q)(o);p.groups.sort(((t,e)=>l[t.entity_id]-l[e.entity_id]));const f={};Object.keys(p.ungrouped).forEach((t=>{const e=p.ungrouped[t],n=(0,s.N)(e);n in f||(f[n]=[]),f[n].push(e.entity_id)}));let g=[];if("person"in f){const t=[];if(1===f.person.length)g.push({type:"entities",entities:f.person});else{let e,n="";for(const r of f.person){const s=o[r];let a=s.attributes.entity_picture;if(!a){if(void 0===e){const t=getComputedStyle(document.body);e=encodeURIComponent(t.getPropertyValue("--light-primary-color").trim()),n=encodeURIComponent((t.getPropertyValue("--text-light-primary-color")||t.getPropertyValue("--primary-text-color")).trim())}a=`data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 50 50' width='50' height='50' style='background-color:${e}'%3E%3Cg%3E%3Ctext font-family='roboto' x='50%25' y='50%25' text-anchor='middle' stroke='${n}' font-size='1.3em' dy='.3em'%3E${(0,d.fm)(s.attributes.friendly_name||"")}%3C/text%3E%3C/g%3E%3C/svg%3E`}t.push({type:"picture-entity",entity:r,aspect_ratio:"1",show_name:!1,image:a})}g.push({type:"grid",square:!0,columns:3,cards:t})}delete f.person}p.groups.forEach((t=>{g=g.concat(y(t.attributes.entity_id.map((t=>[t,o[t]])),{title:(0,a.C)(t),show_header_toggle:"hidden"!==t.attributes.control}))})),Object.keys(f).sort().forEach((e=>{g=g.concat(y(f[e].sort(((t,e)=>(0,c.$)((0,a.C)(o[t]),(0,a.C)(o[e])))).map((t=>[t,o[t]])),{title:(0,u.Lh)(t,e)}))}));const h={path:e,title:n,cards:g};return r&&(h.icon=r),h})(o,"default_view","Home",undefined,m.otherEntities,h),v=[];if(m.areasWithEntities.forEach((([t,e])=>{v.push(...y(e.map((t=>[t.entity_id,t])),{title:t.name}))})),l){const t=l.energy_sources.find((t=>"grid"===t.type));t&&t.flow_from.length>0&&v.push({title:"Energy distribution today",type:"energy-distribution",link_dashboard:!0})}return _.cards.unshift(...v),_}},76478:(t,e,n)=>{n.a(t,(async t=>{n.r(e),n.d(e,{OriginalStatesStrategy:()=>f});var r=n(28101),s=n(7323),a=n(11950),i=n(57066),o=n(57292),c=n(55424),u=n(74186),l=n(23197),d=t([c]);c=(d.then?await d:d)[0];let p=!1;class f{static async generateView(t){const e=t.hass;if(e.config.state===r.UE)return{cards:[{type:"starting"}]};if(e.config.safe_mode)return{cards:[{type:"safe-mode"}]};let n;p||(p=!0,(0,i.sG)(e.connection,(()=>{})),(0,o.q4)(e.connection,(()=>{})),(0,u.LM)(e.connection,(()=>{}))),(0,s.p)(e,"energy")&&(n=(0,c.ZC)(e));const[d,f,y,g]=await Promise.all([(0,a.l)(e.connection,i.sG),(0,a.l)(e.connection,o.q4),(0,a.l)(e.connection,u.LM),e.loadBackendTranslation("title")]);let h;if(n)try{h=await n}catch(t){}const m=(0,l.AP)(d,f,y,e.states,g,h);return e.config.components.includes("geo_location")&&m&&m.cards&&m.cards.push({type:"map",geo_location_sources:["all"]}),0===m.cards.length&&m.cards.push({type:"empty-state"}),m}static async generateDashboard(t){return{title:t.hass.config.location_name,views:[{strategy:{type:"original-states"}}]}}}}))}}]);