{"version":3,"file":"lib_widget_js-webpack_sharing_consume_default_emotion_react_emotion_react-webpack_sharing_con-d81bea.bc6d4e421e3ed5225260.js","mappings":";;;;;;;;;AAAa;AACb;AACA;AACA,mCAAmC,oCAAoC,gBAAgB;AACvF,CAAC;AACD;AACA;AACA,CAAC;AACD;AACA,0CAA0C,4BAA4B;AACtE,CAAC;AACD;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6CAA6C;AAC7C;AACA,8CAA6C,EAAE,aAAa,EAAC;AAC7D,kBAAkB;AAClB,6BAA6B,mBAAO,CAAC,oDAAO;AAC5C,gCAAgC,mBAAO,CAAC,2FAAkB;AAC1D,mBAAO,CAAC,yFAAkC;AAC1C,iCAAiC,mBAAO,CAAC,0EAAsB;AAC/D,kCAAkC,mBAAO,CAAC,4EAAuB;AACjE,wBAAwB,mBAAO,CAAC,+CAAiB;AACjD;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0CAA0C;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yCAAyC;AACzC;AACA,iCAAiC;AACjC;AACA,6BAA6B;AAC7B,yBAAyB;AACzB,qBAAqB;AACrB;AACA;AACA,aAAa;AACb;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uEAAuE,MAAM,EAAE,OAAO;AACtF,mBAAmB;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0FAA0F,kCAAkC;AAC5H;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB,qBAAqB;AACrB;AACA,iBAAiB;AACjB;AACA,uEAAuE;AACvE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA,iBAAiB,4DAA4D;AAC7E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wFAAwF;AACxF;AACA;AACA;AACA;AACA,kCAAkC,kBAAkB;AACpD,qBAAqB;AACrB,mBAAmB;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uDAAuD,SAAS,6CAA6C;AAC7G,mDAAmD;AACnD;AACA;AACA,mBAAmB;AACnB,mEAAmE;AACnE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB,2BAA2B;AAChD,+DAA+D,kBAAkB;AACjF,kEAAkE,wBAAwB;AAC1F;AACA;AACA,kBAAkB;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAe;AACf;;;;;;;;;;;AC5Qa;AACb;AACA;AACA,8CAA6C,EAAE,aAAa,EAAC;AAC7D,mBAAmB,GAAG,sBAAsB;AAC5C;AACA;AACA;AACA,aAAa,mBAAO,CAAC,uCAAiB;AACtC;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB;AACtB;AACA;AACA;AACA,mBAAmB;AACnB;;;;;;;;;;;ACpBa;AACb;AACA;AACA;AACA,6CAA6C;AAC7C;AACA,8CAA6C,EAAE,aAAa,EAAC;AAC7D,sBAAsB,GAAG,uBAAuB;AAChD,eAAe,mBAAO,CAAC,oFAAuB;AAC9C,YAAY,OAAO;AACnB,kBAAkB,mBAAO,CAAC,wEAAiB;AAC3C,gCAAgC,mBAAO,CAAC,oDAAO;AAC/C,mBAAmB,mBAAO,CAAC,kFAAsB;AACjD,sCAAsC,mBAAO,CAAC,2CAAe;AAC7D,kBAAkB,mBAAO,CAAC,mCAAW;AACrC,oBAAoB,mBAAO,CAAC,4EAAmB;AAC/C;AACA,mBAAO,CAAC,2CAAmB;AAC3B;AACA;AACA,6CAA6C,uBAAuB,oUAAoU;AACxY;AACA;AACA;AACA;AACA;AACA;AACA,6DAA6D;AAC7D;AACA;AACA,uBAAuB;AACvB,4DAA4D,wCAAwC,YAAY,qCAAqC;AACrJ;AACA;AACA;AACA,8CAA8C;AAC9C,qDAAqD;AACrD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sEAAsE,8CAA8C;AACpH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4CAA4C;AAC5C;AACA;AACA;AACA,sBAAsB;AACtB;;;;;;;;;;;ACrEa;AACb;AACA;AACA,mCAAmC,oCAAoC,gBAAgB;AACvF,CAAC;AACD;AACA;AACA,CAAC;AACD;AACA,0CAA0C,4BAA4B;AACtE,CAAC;AACD;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8CAA6C,EAAE,aAAa,EAAC;AAC7D,qBAAqB;AACrB,6BAA6B,mBAAO,CAAC,oDAAO;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wCAAwC;AACxC;AACA;AACA;AACA,sDAAsD,iBAAiB;AACvE;AACA;AACA,qBAAqB;AACrB;;;;;;;;;;;;;;;;;;;;AC/CA,UAAU,mBAAO,CAAC,oJAAwE;AAC1F,0BAA0B,mBAAO,CAAC,qHAAuD;;AAEzF;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;;;;AAIA","sources":["webpack://ipyflex/./lib/reactWidget.js","webpack://ipyflex/./lib/version.js","webpack://ipyflex/./lib/widget.js","webpack://ipyflex/./lib/widgetWrapper.js","webpack://ipyflex/./css/widget.css"],"sourcesContent":["\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.FlexWidget = void 0;\nconst react_1 = __importStar(require(\"react\"));\nconst FlexLayout = __importStar(require(\"flexlayout-react\"));\nrequire(\"flexlayout-react/style/light.css\");\nconst Button_1 = __importDefault(require(\"@mui/material/Button\"));\nconst Toolbar_1 = __importDefault(require(\"@mui/material/Toolbar\"));\nconst widgetWrapper_1 = require(\"./widgetWrapper\");\nconst DEFAULT_MODEL = {\n    global: {\n        tabEnableRename: true,\n    },\n    layout: {\n        type: 'row',\n        id: '#1',\n        children: [\n            {\n                type: 'tabset',\n                id: '#2',\n                children: [],\n                active: true,\n            },\n        ],\n    },\n    borders: [],\n};\nconst DEFAULT_OUTER_MODEL = {\n    global: {\n        tabEnableRename: true,\n        tabSetTabLocation: 'bottom',\n    },\n    layout: {\n        type: 'row',\n        id: '#1',\n        children: [\n            {\n                type: 'tabset',\n                id: '#2',\n                children: [\n                    {\n                        type: 'tab',\n                        id: '#3',\n                        name: 'New section ',\n                        component: 'sub',\n                        config: {\n                            model: {\n                                global: {},\n                                layout: {\n                                    type: 'row',\n                                    id: '#1',\n                                    children: [\n                                        {\n                                            type: 'tabset',\n                                            id: '#3',\n                                            children: [],\n                                            active: true,\n                                        },\n                                    ],\n                                },\n                                borders: [],\n                            },\n                        },\n                    },\n                ],\n                active: true,\n            },\n        ],\n    },\n    borders: [],\n};\nclass FlexWidget extends react_1.Component {\n    constructor(props) {\n        super(props);\n        this.layoutRef = react_1.default.createRef();\n        this.factory = (node) => {\n            const component = node.getComponent();\n            // const config = node.getConfig();\n            const nodeId = node.getId();\n            // const name = node.getName();\n            const nameList = Object.values(FlexWidget.COMPONENT_DICT);\n            nameList.push('Section');\n            // if (nameList.includes(name)) {\n            //   try {\n            //     node\n            //       .getModel()\n            //       .doAction(FlexLayout.Actions.renameTab(nodeId, `${name} ${nodeId}`));\n            //   } catch (error) {\n            //     console.log(error);\n            //   }\n            // }\n            switch (component) {\n                case 'grid': {\n                    return react_1.default.createElement(\"div\", null, \"grid\");\n                }\n                case 'controller': {\n                    return react_1.default.createElement(\"div\", null, \"controller\");\n                }\n                case '3Dview': {\n                    return react_1.default.createElement(\"div\", null, \"3Dview\");\n                }\n                case 'structureView': {\n                    return react_1.default.createElement(\"div\", null, \"structureView\");\n                }\n                case 'PBS': {\n                    return react_1.default.createElement(widgetWrapper_1.WidgetWrapper, { model: this.model, widget_idx: 0 });\n                }\n                case 'connectionView': {\n                    return react_1.default.createElement(\"div\", null, \"connectionView\");\n                }\n                case 'infoView': {\n                    return react_1.default.createElement(\"div\", null, \"infoView\");\n                }\n                case 'dataView': {\n                    return react_1.default.createElement(\"div\", null, \"dataView\");\n                }\n                case 'widgetView': {\n                    return react_1.default.createElement(\"div\", null, \"widgetView\");\n                }\n                case 'documentView': {\n                    return react_1.default.createElement(\"div\", null, \"documentView\");\n                }\n                case 'sub': {\n                    return this.generateSection(node, nodeId);\n                }\n            }\n            return null;\n        };\n        this.generateSection = (node, nodeId) => {\n            let model = node.getExtraData().model;\n            let defaultModel;\n            this.innerlayoutRef[nodeId] = react_1.default.createRef();\n            if (node.getConfig() && node.getConfig().model) {\n                defaultModel = node.getConfig().model;\n            }\n            else {\n                defaultModel = DEFAULT_MODEL;\n            }\n            if (!model) {\n                node.getExtraData().model = FlexLayout.Model.fromJson(defaultModel);\n                model = node.getExtraData().model;\n                // save sub-model on save event\n                node.setEventListener('save', (p) => {\n                    this.state.model.doAction(FlexLayout.Actions.updateNodeAttributes(nodeId, {\n                        config: {\n                            model: node.getExtraData().model.toJson(),\n                        },\n                    }));\n                    //  node.getConfig().model = node.getExtraData().model.toJson();\n                });\n            }\n            return (react_1.default.createElement(FlexLayout.Layout, { ref: this.innerlayoutRef[nodeId], classNameMapper: (className) => {\n                    if (className === 'flexlayout__tabset-selected') {\n                        className =\n                            'inner__flexlayout__tabset-selected flexlayout__tabset-selected';\n                    }\n                    else if (className === 'flexlayout__tabset') {\n                        className = 'inner__flexlayout__tabset flexlayout__tabset';\n                    }\n                    else if (className === 'flexlayout__tab') {\n                        className = 'inner__flexlayout__tab flexlayout__tab';\n                    }\n                    return className;\n                }, model: model, factory: this.factory, onRenderTabSet: (tabSetNode, renderValues) => {\n                    this.onRenderTabSet(tabSetNode, renderValues, nodeId);\n                }, onAction: (action) => this.innerOnAction(nodeId, action) }));\n        };\n        this.onAction = (action) => {\n            if (action.type === 'FlexLayout_MoveNode' ||\n                action.type === 'FlexLayout_AdjustSplit' ||\n                action.type === 'FlexLayout_DeleteTab' ||\n                action.type === 'FlexLayout_MaximizeToggle' ||\n                action.type === 'FlexLayout_SelectTab') {\n                window.dispatchEvent(new Event('resize'));\n            }\n            return action;\n        };\n        this.innerOnAction = (outerNodeID, action) => {\n            if (action.type === 'FlexLayout_MoveNode' ||\n                action.type === 'FlexLayout_AdjustSplit' ||\n                action.type === 'FlexLayout_DeleteTab' ||\n                action.type === 'FlexLayout_MaximizeToggle') {\n                window.dispatchEvent(new Event('resize'));\n            }\n            return action;\n        };\n        this.onRenderTabSet = (tabSetNode, renderValues, nodeId) => {\n            // const tabsetId = tabSetNode.getId();\n            renderValues.buttons.push(react_1.default.createElement(Button_1.default, { onClick: () => {\n                    const tabsetId = tabSetNode.getId();\n                    this.innerlayoutRef[nodeId].current.addTabToTabSet(tabsetId, {\n                        component: 'PBS',\n                        name: FlexWidget.COMPONENT_DICT['PBS'],\n                        config: { layoutID: nodeId },\n                    });\n                } },\n                \"Add widget\",\n                ' '));\n        };\n        this.onAddRow = () => {\n            this.layoutRef.current.addTabToActiveTabSet({\n                component: 'sub',\n                name: 'New section',\n            });\n        };\n        this.innerlayoutRef = {};\n        this.state = {\n            model: FlexLayout.Model.fromJson(DEFAULT_OUTER_MODEL),\n        };\n        this.model = props.model;\n    }\n    render() {\n        return (react_1.default.createElement(\"div\", { style: { height: '100%', border: 'solid 1px black' } },\n            react_1.default.createElement(\"div\", { style: {\n                    width: '100%',\n                    height: 'calc(100% - 36px)',\n                } },\n                react_1.default.createElement(FlexLayout.Layout, { ref: this.layoutRef, model: this.state.model, factory: this.factory, classNameMapper: (className) => {\n                        if (className === 'flexlayout__layout') {\n                            className =\n                                'chartviewer__flexlayout__layout flexlayout__layout ';\n                        }\n                        else if (className === 'flexlayout__tabset-selected') {\n                            className =\n                                'outer__flexlayout__tabset-selected flexlayout__tabset-selected ';\n                        }\n                        return className;\n                    }, onAction: this.onAction })),\n            react_1.default.createElement(Toolbar_1.default, { variant: \"dense\" },\n                react_1.default.createElement(Button_1.default, { onClick: this.onAddRow }, \"Add section\"))));\n    }\n}\nexports.FlexWidget = FlexWidget;\nFlexWidget.COMPONENT_DICT = {\n    grid: 'Chart widget',\n    dataView: 'Data widget',\n    controller: 'Controller widget',\n    '3Dview': '3D widget',\n    structureView: 'Structure widget',\n    infoView: 'System info widget',\n    PBS: 'PBS widget',\n    connectionView: 'Connection widget',\n    documentView: 'Document widget',\n    widgetView: 'Custom widget',\n};\nexports.default = FlexWidget;\n//# sourceMappingURL=reactWidget.js.map","\"use strict\";\n// Copyright (c) Trung Le\n// Distributed under the terms of the Modified BSD License.\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.MODULE_NAME = exports.MODULE_VERSION = void 0;\n// eslint-disable-next-line @typescript-eslint/ban-ts-comment\n// @ts-ignore\n// eslint-disable-next-line @typescript-eslint/no-var-requires\nconst data = require('../package.json');\n/**\n * The _model_module_version/_view_module_version this package implements.\n *\n * The html widget manager assumes that this is the same as the npm package\n * version number.\n */\nexports.MODULE_VERSION = data.version;\n/*\n * The current package name.\n */\nexports.MODULE_NAME = data.name;\n//# sourceMappingURL=version.js.map","\"use strict\";\n// Copyright (c) Trung Le\n// Distributed under the terms of the Modified BSD License.\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.FlexLayoutView = exports.FlexLayoutModel = void 0;\nconst base_1 = require(\"@jupyter-widgets/base\");\n// import { UUID } from '@lumino/coreutils';\nconst widgets_1 = require(\"@lumino/widgets\");\nconst react_1 = __importDefault(require(\"react\"));\nconst apputils_1 = require(\"@jupyterlab/apputils\");\nconst reactWidget_1 = __importDefault(require(\"./reactWidget\"));\nconst version_1 = require(\"./version\");\nconst messaging_1 = require(\"@lumino/messaging\");\n// Import the CSS\nrequire(\"../css/widget.css\");\nclass FlexLayoutModel extends base_1.DOMWidgetModel {\n    defaults() {\n        return Object.assign(Object.assign({}, super.defaults()), { _model_name: FlexLayoutModel.model_name, _model_module: FlexLayoutModel.model_module, _model_module_version: FlexLayoutModel.model_module_version, _view_name: FlexLayoutModel.view_name, _view_module: FlexLayoutModel.view_module, _view_module_version: FlexLayoutModel.view_module_version, children: [], value: 'Hello World' });\n    }\n    /**\n     * Public constructor\n     */\n    initialize(attributes, options) {\n        super.initialize(attributes, options);\n        this.widget_manager.display_model(undefined, this, {});\n    }\n}\nexports.FlexLayoutModel = FlexLayoutModel;\nFlexLayoutModel.serializers = Object.assign(Object.assign({}, base_1.DOMWidgetModel.serializers), { children: { deserialize: base_1.unpack_models } });\nFlexLayoutModel.model_name = 'FlexLayoutModel';\nFlexLayoutModel.model_module = version_1.MODULE_NAME;\nFlexLayoutModel.model_module_version = version_1.MODULE_VERSION;\nFlexLayoutModel.view_name = 'FlexLayoutView'; // Set to null if no view\nFlexLayoutModel.view_module = version_1.MODULE_NAME; // Set to null if no view\nFlexLayoutModel.view_module_version = version_1.MODULE_VERSION;\nclass WidgetWrapper extends apputils_1.ReactWidget {\n    constructor(send_msg, model) {\n        super();\n        this.onResize = (msg) => {\n            window.dispatchEvent(new Event('resize'));\n        };\n        this._send_msg = send_msg;\n        this._model = model;\n    }\n    render() {\n        return react_1.default.createElement(reactWidget_1.default, { send_msg: this._send_msg, model: this._model });\n    }\n}\nclass FlexLayoutView extends base_1.DOMWidgetView {\n    render() {\n        super.render();\n        this.el.classList.add('custom-widget');\n        const widget = new WidgetWrapper(this.send.bind(this), this.model);\n        messaging_1.MessageLoop.sendMessage(widget, widgets_1.Widget.Msg.BeforeAttach);\n        this.el.insertBefore(widget.node, null);\n        messaging_1.MessageLoop.sendMessage(widget, widgets_1.Widget.Msg.AfterAttach);\n        // this.el.innerHTML = 'hello trung';\n        // const children = this.model.get('children');\n        // const manager = this.model.widget_manager;\n        // // console.log('children', children);\n        // // manager\n        // //   .create_view(children[0], {})\n        // //   .then((view) => this.el.appendChild(view.pWidget.node));\n    }\n}\nexports.FlexLayoutView = FlexLayoutView;\n//# sourceMappingURL=widget.js.map","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.WidgetWrapper = void 0;\nconst react_1 = __importStar(require(\"react\"));\nclass WidgetWrapper extends react_1.Component {\n    constructor(props) {\n        super(props);\n        this.model = props.model;\n        this.widget_idx = props.widget_idx;\n        this.state = {\n            state: 0,\n        };\n        this.myRef = react_1.default.createRef();\n    }\n    componentDidMount() {\n        console.log('start did mount');\n        const children = this.model.get('children');\n        const manager = this.model.widget_manager;\n        console.log('children', children);\n        manager\n            .create_view(children[0], {})\n            .then((view) => this.myRef.current.appendChild(view.pWidget.node));\n    }\n    render() {\n        return react_1.default.createElement(\"div\", { ref: this.myRef });\n    }\n}\nexports.WidgetWrapper = WidgetWrapper;\n//# sourceMappingURL=widgetWrapper.js.map","var api = require(\"!../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../node_modules/css-loader/dist/cjs.js!./widget.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};"],"names":[],"sourceRoot":""}