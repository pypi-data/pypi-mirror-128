(self.webpackChunkjupyterlab_link_share=self.webpackChunkjupyterlab_link_share||[]).push([[703],{703:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>u});var n,o=a(825),r=a(387),l=a(958),i=a(369),s=a(706),c=a(584);!function(e){e.share="link-share:share"}(n||(n={}));const u=[{id:"jupyterlab-link-share:plugin",autoStart:!0,optional:[o.ICommandPalette,l.IMainMenu,i.ITranslator],activate:(e,t,a,l)=>{const{commands:u}=e,d=(null!=l?l:i.nullTranslator).load("jupyterlab");if(u.addCommand(n.share,{label:d.__("Share Jupyter Server Link"),execute:async()=>{let e;e=""!==r.PageConfig.getOption("hubUser")?[{token:r.PageConfig.getToken()}]:await async function(e="",t={}){const a=c.ServerConnection.makeSettings(),n=r.URLExt.join(a.baseUrl,"jupyterlab_link_share",e);let o;try{o=await c.ServerConnection.makeRequest(n,t,a)}catch(e){throw new c.ServerConnection.NetworkError(e)}let l=await o.text();if(l.length>0)try{l=JSON.parse(l)}catch(e){console.log("Not a JSON response body.",o)}if(!o.ok)throw new c.ServerConnection.ResponseError(o,l.message||l);return l}("servers");const t=e.map((e=>r.URLExt.normalize(`${r.PageConfig.getUrl({workspace:r.PageConfig.defaultWorkspace})}?token=${e.token}`))),a=document.createElement("div");t.map((e=>{const t=document.createElement("p"),n=document.createElement("a");n.href=e,n.innerText=e,t.appendChild(n),a.appendChild(t)})),(await(0,o.showDialog)({title:d.__("Share Jupyter Server Link"),body:new s.Widget({node:a}),buttons:[o.Dialog.cancelButton({label:d.__("Cancel")}),o.Dialog.okButton({label:d.__("Copy"),caption:d.__("Copy the link to the Jupyter Server")})]})).button.accept&&o.Clipboard.copyToSystem(t[0])}}),t&&t.addItem({command:n.share,category:d.__("Server")}),a){const e=new s.Menu({commands:u});e.title.label=d.__("Share"),a.addMenu(e,{rank:1e4}),e.addItem({command:n.share})}}}]}}]);