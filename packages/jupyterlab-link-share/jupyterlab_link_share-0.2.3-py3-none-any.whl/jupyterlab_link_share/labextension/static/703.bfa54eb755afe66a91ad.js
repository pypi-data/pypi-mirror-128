(self.webpackChunkjupyterlab_link_share=self.webpackChunkjupyterlab_link_share||[]).push([[703],{703:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>u});var a,o=n(825),r=n(387),l=n(958),s=n(369),i=n(706),c=n(584);!function(e){e.share="link-share:share"}(a||(a={}));const u=[{id:"jupyterlab-link-share:plugin",autoStart:!0,optional:[o.ICommandPalette,l.IMainMenu,s.ITranslator],activate:(e,t,n,l)=>{const{commands:u}=e,d=(null!=l?l:s.nullTranslator).load("jupyterlab");if(u.addCommand(a.share,{label:d.__("Share Jupyter Server Link"),execute:async()=>{let e;const t=""!==r.PageConfig.getOption("hubUser");e=t?[{token:r.PageConfig.getToken()}]:await async function(e="",t={}){const n=c.ServerConnection.makeSettings(),a=r.URLExt.join(n.baseUrl,"jupyterlab_link_share",e);let o;try{o=await c.ServerConnection.makeRequest(a,t,n)}catch(e){throw new c.ServerConnection.NetworkError(e)}let l=await o.text();if(l.length>0)try{l=JSON.parse(l)}catch(e){console.log("Not a JSON response body.",o)}if(!o.ok)throw new c.ServerConnection.ResponseError(o,l.message||l);return l}("servers");const n=e.map((e=>r.URLExt.normalize(`${r.PageConfig.getUrl({workspace:r.PageConfig.defaultWorkspace})}?token=${e.token}`))),a=document.createElement("div");n.map((e=>{const t=document.createElement("p"),n=document.createElement("input");n.readOnly=!0,n.value=e,n.addEventListener("click",(e=>{e.target.select()})),n.style.width="100%",t.appendChild(n),a.appendChild(t)}));const l=document.createElement("div"),s=document.createElement("h3");s.innerText=d.__("Security warning!"),l.appendChild(s);const u=["Anyone with this link has full access to your notebook server, including all your files!","Please be careful who you share it with."];t?u.push("To revoke access, go to File -> Hub Control Panel, and restart your server"):u.push("Currently, there is no way to revoke access other than shutting down your server"),u.map((e=>{l.appendChild(document.createTextNode(d.__(e))),l.appendChild(document.createElement("br"))})),a.appendChild(l),(await(0,o.showDialog)({title:d.__("Share Jupyter Server Link"),body:new i.Widget({node:a}),buttons:[o.Dialog.cancelButton({label:d.__("Cancel")}),o.Dialog.okButton({label:d.__("Copy Link"),caption:d.__("Copy the link to the Jupyter Server")})]})).button.accept&&o.Clipboard.copyToSystem(n[0])}}),t&&t.addItem({command:a.share,category:d.__("Server")}),n){const e=new i.Menu({commands:u});e.title.label=d.__("Share"),n.addMenu(e,{rank:1e4}),e.addItem({command:a.share})}}}]}}]);