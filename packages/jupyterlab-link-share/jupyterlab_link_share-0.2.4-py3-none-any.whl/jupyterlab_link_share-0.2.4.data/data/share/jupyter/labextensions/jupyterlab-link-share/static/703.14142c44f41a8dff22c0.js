(self.webpackChunkjupyterlab_link_share=self.webpackChunkjupyterlab_link_share||[]).push([[703],{703:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>d});var a,r=n(825),o=n(919),l=n(387),s=n(958),i=n(369),c=n(706),u=n(584);!function(e){e.share="link-share:share"}(a||(a={}));const d=[{id:"jupyterlab-link-share:plugin",autoStart:!0,optional:[r.ICommandPalette,s.IMainMenu,i.ITranslator,o.IRetroShell],activate:(e,t,n,o,s)=>{const{commands:d}=e,h=(null!=o?o:i.nullTranslator).load("jupyterlab");if(d.addCommand(a.share,{label:h.__("Share Jupyter Server Link"),execute:async()=>{let e;const t=""!==l.PageConfig.getOption("hubUser");e=t?[{token:l.PageConfig.getToken()}]:await async function(e="",t={}){const n=u.ServerConnection.makeSettings(),a=l.URLExt.join(n.baseUrl,"jupyterlab_link_share",e);let r;try{r=await u.ServerConnection.makeRequest(a,t,n)}catch(e){throw new u.ServerConnection.NetworkError(e)}let o=await r.text();if(o.length>0)try{o=JSON.parse(o)}catch(e){console.log("Not a JSON response body.",r)}if(!r.ok)throw new u.ServerConnection.ResponseError(r,o.message||o);return o}("servers");const n=e.map((e=>{if(s){const t=new URL(location.href);return t.searchParams.set("token",e.token),t.toString()}return l.URLExt.normalize(`${l.PageConfig.getUrl({workspace:l.PageConfig.defaultWorkspace})}?token=${e.token}`)})),a=document.createElement("div");n.map((e=>{const t=document.createElement("p"),n=document.createElement("input");n.readOnly=!0,n.value=e,n.addEventListener("click",(e=>{e.target.select()})),n.style.width="100%",t.appendChild(n),a.appendChild(t)}));const o=document.createElement("div"),i=document.createElement("h3");i.innerText=h.__("Security warning!"),o.appendChild(i);const d=["Anyone with this link has full access to your notebook server, including all your files!","Please be careful who you share it with."];t?d.push("To revoke access, go to File -> Hub Control Panel, and restart your server"):d.push("Currently, there is no way to revoke access other than shutting down your server"),d.map((e=>{o.appendChild(document.createTextNode(h.__(e))),o.appendChild(document.createElement("br"))})),a.appendChild(o),(await(0,r.showDialog)({title:h.__("Share Jupyter Server Link"),body:new c.Widget({node:a}),buttons:[r.Dialog.cancelButton({label:h.__("Cancel")}),r.Dialog.okButton({label:h.__("Copy Link"),caption:h.__("Copy the link to the Jupyter Server")})]})).button.accept&&r.Clipboard.copyToSystem(n[0])}}),t&&t.addItem({command:a.share,category:h.__("Server")}),n){const e=new c.Menu({commands:d});e.title.label=h.__("Share"),n.addMenu(e,{rank:1e4}),e.addItem({command:a.share})}}}]}}]);