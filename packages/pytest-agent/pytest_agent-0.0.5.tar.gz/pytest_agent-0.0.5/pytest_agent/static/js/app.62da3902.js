(function(t){function e(e){for(var s,r,c=e[0],o=e[1],l=e[2],d=0,p=[];d<c.length;d++)r=c[d],Object.prototype.hasOwnProperty.call(a,r)&&a[r]&&p.push(a[r][0]),a[r]=0;for(s in o)Object.prototype.hasOwnProperty.call(o,s)&&(t[s]=o[s]);u&&u(e);while(p.length)p.shift()();return i.push.apply(i,l||[]),n()}function n(){for(var t,e=0;e<i.length;e++){for(var n=i[e],s=!0,c=1;c<n.length;c++){var o=n[c];0!==a[o]&&(s=!1)}s&&(i.splice(e--,1),t=r(r.s=n[0]))}return t}var s={},a={app:0},i=[];function r(e){if(s[e])return s[e].exports;var n=s[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.m=t,r.c=s,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)r.d(n,s,function(e){return t[e]}.bind(null,s));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/ui/";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],o=c.push.bind(c);c.push=e,c=c.slice();for(var l=0;l<c.length;l++)e(c[l]);var u=o;i.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"26de":function(t,e,n){"use strict";n("5b5c")},"56d7":function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var s=n("2b0e"),a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-app",[s("v-app-bar",{attrs:{app:"",color:"black",dark:""}},[s("div",{staticClass:"d-flex align-center"},[s("v-img",{staticClass:"shrink mr-2",attrs:{contain:"",src:n("cf05"),transition:"scale-transition",width:"40"}})],1),s("v-spacer"),s("v-btn",{attrs:{title:"click to select agent url"},on:{click:function(e){t.isSelectAgentDialogDisplayed=!0}}},[t._v(" "+t._s(t.selectAgentMessage)+" ")])],1),s("select-agent-dialog",{model:{value:t.isSelectAgentDialogDisplayed,callback:function(e){t.isSelectAgentDialogDisplayed=e},expression:"isSelectAgentDialogDisplayed"}}),s("v-main",[s("router-view")],1)],1)},i=[],r=n("5530"),c=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-dialog",{attrs:{width:"500"},model:{value:t.isDialogDisplayed,callback:function(e){t.isDialogDisplayed=e},expression:"isDialogDisplayed"}},[n("v-card",[n("v-toolbar",{attrs:{color:"primary",dark:""}},[t._v("Opening from the bottom")]),n("v-card-text",{staticStyle:{"padding-top":"1em"}},[t.agentURLs.length>0?n("div",[n("p",[t._v("Use an existing agent")]),n("v-select",{attrs:{label:"Select an existing agent",items:t.agentURLs,"return-object":""},on:{change:t.useAgent}})],1):t._e(),n("form",{on:{submit:function(e){return e.preventDefault(),t.addAgent(t.newAgentURL)}}},[n("p",[t.agentURLs.length>0?n("strong",[t._v("OR")]):t._e(),t._v(" Connect to a new agent ")]),n("v-row",[n("v-text-field",{attrs:{label:"Type a new agent URL",required:""},model:{value:t.newAgentURL,callback:function(e){t.newAgentURL=e},expression:"newAgentURL"}}),n("v-btn",{attrs:{color:"primary",type:"submit",icon:""}},[n("v-icon",[t._v("mdi-plus")])],1)],1)],1)]),n("v-card-actions",{staticClass:"justify-end"},[n("v-btn",{attrs:{text:"",color:"red"},on:{click:function(e){return t.disconnect()}}},[t._v("Disconnect")]),n("v-btn",{attrs:{text:""},on:{click:function(e){t.isDialogDisplayed=!1}}},[t._v("Close")])],1)],1)],1)},o=[],l=n("2f62"),u={data:function(){return{isDialogDisplayed:!1,newAgentURL:null}},computed:Object(r["a"])({},Object(l["b"])("agent",["agentURLs"])),props:{value:{type:Boolean,default:!1}},watch:{value:{immediate:!0,handler:function(t){this.isDialogDisplayed=t}},isDialogDisplayed:{immediate:!0,handler:function(t){this.$emit("input",t)}}},methods:{addAgent:function(){this.$store.dispatch("agent/addAgent",this.newAgentURL),this.isDialogDisplayed=!1},useAgent:function(t){this.$store.dispatch("agent/useAgent",t),this.isDialogDisplayed=!1},disconnect:function(){this.$store.dispatch("agent/useAgent",null),this.isDialogDisplayed=!1}}},d=u,p=n("2877"),f=n("6544"),m=n.n(f),g=n("8336"),v=n("b0af"),h=n("99d9"),b=n("169a"),y=n("132d"),x=n("0fd9"),T=n("b974"),_=n("8654"),D=n("71d9"),O=Object(p["a"])(d,c,o,!1,null,null,null),k=O.exports;m()(O,{VBtn:g["a"],VCard:v["a"],VCardActions:h["a"],VCardText:h["b"],VDialog:b["a"],VIcon:y["a"],VRow:x["a"],VSelect:T["a"],VTextField:_["a"],VToolbar:D["a"]});var w={name:"App",components:{SelectAgentDialog:k},data:function(){return{isSelectAgentDialogDisplayed:!1}},computed:Object(r["a"])(Object(r["a"])({},Object(l["c"])("agent",["selectedAgent"])),{},{selectAgentMessage:function(){return this.selectedAgent?this.selectedAgent:"Connect to a pytest agent"}})},A=w,R=n("7496"),j=n("40dc"),S=n("adda"),V=n("f6c4"),M=n("2fa4"),C=Object(p["a"])(A,a,i,!1,null,null,null),L=C.exports;m()(C,{VApp:R["a"],VAppBar:j["a"],VBtn:g["a"],VImg:S["a"],VMain:V["a"],VSpacer:M["a"]});var U=n("8c4f"),I=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("main",[n("v-container",{staticStyle:{"padding-bottom":"3em"}},[n("h2",[t._v("Welcome home")]),n("v-text-field",{attrs:{label:"Tipe a search here to filter tests"}}),n("test-list",{attrs:{modules:t.testModules},on:{click:t.showTestOutput},model:{value:t.selectedTests,callback:function(e){t.selectedTests=e},expression:"selectedTests"}})],1),n("div",{staticStyle:{"z-index":"10",position:"fixed",display:"flex",left:"0",right:"0",bottom:"0","background-color":"#424242",padding:"8px 2em"}},[n("status-bar",{attrs:{metrics:t.testMetrics}}),n("v-spacer"),n("span",{staticStyle:{color:"white"}},[t._v(" "+t._s(t.selectedTestsCounter)+" test(s) selected ")]),n("v-icon",{attrs:{color:"green",title:"Refresh test results"},on:{click:function(e){return t.refreshResults()}}},[t._v(" mdi-refresh ")]),t.selectedTestsCounter>0?n("v-icon",{attrs:{color:"green",title:"Run selected tests"},on:{click:function(e){return t.runSelectedTests()}}},[t._v(" mdi-play-circle ")]):t._e(),n("v-icon",{attrs:{color:"orange",title:"Select failed tests"},on:{click:function(e){return t.selectFailed()}}},[t._v(" mdi-alert-circle ")]),n("v-icon",{attrs:{color:"blue",title:"Select all tests"},on:{click:function(e){return t.selectAll()}}},[t._v(" mdi-checkbox-multiple-marked-outline ")]),n("v-icon",{attrs:{color:"accent",title:"Deselect all tests"},on:{click:function(e){return t.deselectAll()}}},[t._v(" mdi-close-circle ")]),n("v-icon",{attrs:{color:"red",title:"Clear test results"},on:{click:function(e){return t.dismissResults()}}},[t._v(" mdi-delete ")])],1),n("test-output-dialog",{attrs:{output:t.displayedOutput},model:{value:t.isOutputDisplayed,callback:function(e){t.isOutputDisplayed=e},expression:"isOutputDisplayed"}})],1)},$=[],P=n("b85c"),E=(n("caad"),n("2532"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",t._l(t.metrics,(function(t,e){return n("span",{key:e,staticClass:"statusbar-icon"},[n("status-icon",{attrs:{status:e,counter:t}})],1)})),0)}),B=[],N=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("span",{class:t.statusColor+"--text",attrs:{title:t.title}},[n("v-icon",{attrs:{color:t.statusColor}},[t._v(t._s(t.statusIcon))]),t._v(" "+t._s(t.counter)+" ")],1)},F=[],H=(n("a9e3"),{"n/a":"orange",succeed:"green",failed:"red",running:"blue",pending:"teal",total:"white"}),J={"n/a":"mdi-cancel",succeed:"mdi-check",failed:"mdi-alert-circle",running:"mdi-run-fast",pending:"mdi-sleep",total:"mdi-magnify"},q={props:{status:{type:String,default:"n/a"},counter:{type:Number,default:null}},computed:{statusColor:function(){return H[this.status]},statusIcon:function(){return J[this.status]},title:function(){return(this.counter?this.counter+" ":"")+this.status}}},z=q,G=Object(p["a"])(z,N,F,!1,null,null,null),W=G.exports;m()(G,{VIcon:y["a"]});var X={components:{StatusIcon:W},props:{metrics:{type:Object,default:function(){return{}}}}},Y=X,K=(n("5e67"),Object(p["a"])(Y,E,B,!1,null,"bf2fb7a4",null)),Q=K.exports,Z=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("v-menu",{attrs:{"position-x":t.contextMenu.x,"position-y":t.contextMenu.y,absolute:"","offset-y":""},model:{value:t.isContextMenuDisplayed,callback:function(e){t.isContextMenuDisplayed=e},expression:"isContextMenuDisplayed"}},[n("v-list",[n("v-list-item",{on:{click:function(e){return t.selectAllModuleTests()}}},[n("v-list-item-title",[t._v(" Select All ")]),n("v-list-item-action",[n("v-icon",{staticStyle:{"margin-left":"0.5em"},attrs:{color:"blue"}},[t._v(" mdi-checkbox-multiple-marked-outline ")])],1)],1),n("v-list-item",{on:{click:function(e){return t.deselectAllModuleTests()}}},[n("v-list-item-title",[t._v(" Deselect All ")]),n("v-list-item-action",[n("v-icon",{staticStyle:{"margin-left":"0.5em"},attrs:{color:"orange",right:""}},[t._v(" mdi-close-circle ")])],1)],1)],1)],1),n("v-expansion-panels",t._l(t.modules,(function(e){return n("v-expansion-panel",{key:e.modulename},[n("v-expansion-panel-header",{on:{contextmenu:function(n){return n.preventDefault(),t.showContextMenu(e,n)}},scopedSlots:t._u([{key:"actions",fn:function(){return t._l(e.statuses,(function(t){return n("StatusIcon",{key:t,attrs:{status:t}})}))},proxy:!0}],null,!0)},[t._v(" "+t._s(e.modulename)+" ")]),n("v-expansion-panel-content",[n("v-list",{attrs:{dense:""}},[n("v-list-item-group",{attrs:{color:"primary"}},t._l(e.tests,(function(e){return n("v-list-item",{key:e.fullname,on:{click:function(n){return t.emitClick(e.fullname)}}},[n("v-checkbox",{attrs:{value:e.fullname},on:{click:function(t){t.stopPropagation()}},model:{value:t.selectedTests,callback:function(e){t.selectedTests=e},expression:"selectedTests"}}),n("v-list-item-content",[n("v-list-item-title",{domProps:{textContent:t._s(e.funcname)}})],1),n("v-list-item-icon",[n("i",{staticStyle:{"margin-right":"0.5em"}},[t._v(" "+t._s(t._f("humandate")(e.refresh_date))+" ")]),n("StatusIcon",{attrs:{status:e.status}})],1)],1)})),1)],1)],1)],1)})),1)],1)},tt=[],et={components:{StatusIcon:W},data:function(){return{selectedTests:[],isContextMenuDisplayed:!1,contextMenu:{x:0,y:0,testModule:null}}},props:{tests:{type:Array,default:function(){return[]}},value:{type:Array,default:function(){return[]}},modules:{type:Object,default:function(){return{}}}},watch:{selectedTests:{handler:function(t){this.$emit("input",t)}},value:function(t){this.selectedTests=t}},filters:{humandate:function(t){return new Date(t).toLocaleString()}},methods:{emitClick:function(t){this.$emit("click",t)},showContextMenu:function(t,e){this.isContextMenuDisplayed=!0,this.contextMenu.x=e.clientX,this.contextMenu.y=e.clientY,this.contextMenu.testModule=t},selectAllModuleTests:function(){console.log(this.contextMenu.testModule),console.log(this.selectedTests);var t,e=Object(P["a"])(this.contextMenu.testModule.tests);try{for(e.s();!(t=e.n()).done;){var n=t.value;this.selectedTests.includes(n.fullname)||this.selectedTests.push(n.fullname)}}catch(s){e.e(s)}finally{e.f()}}}},nt=et,st=n("ac7c"),at=n("cd55"),it=n("49e2"),rt=n("c865"),ct=n("0393"),ot=n("8860"),lt=n("da13"),ut=n("1800"),dt=n("5d23"),pt=n("1baa"),ft=n("34c3"),mt=n("e449"),gt=Object(p["a"])(nt,Z,tt,!1,null,null,null),vt=gt.exports;m()(gt,{VCheckbox:st["a"],VExpansionPanel:at["a"],VExpansionPanelContent:it["a"],VExpansionPanelHeader:rt["a"],VExpansionPanels:ct["a"],VIcon:y["a"],VList:ot["a"],VListItem:lt["a"],VListItemAction:ut["a"],VListItemContent:dt["a"],VListItemGroup:pt["a"],VListItemIcon:ft["a"],VListItemTitle:dt["b"],VMenu:mt["a"]});var ht=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-dialog",{model:{value:t.isDialogDisplayed,callback:function(e){t.isDialogDisplayed=e},expression:"isDialogDisplayed"}},[n("v-card",[n("v-toolbar",{attrs:{color:"primary",dark:""}},[t._v("Test Output")]),n("pre",{staticClass:"code",domProps:{innerHTML:t._s(t.output)}})],1)],1)},bt=[],yt={data:function(){return{isDialogDisplayed:!1}},props:{value:{type:Boolean,default:!1},output:{type:String,default:""}},watch:{value:{immediate:!0,handler:function(t){this.isDialogDisplayed=t}},isDialogDisplayed:{immediate:!0,handler:function(t){this.$emit("input",t)}}}},xt=yt,Tt=(n("65e8"),Object(p["a"])(xt,ht,bt,!1,null,null,null)),_t=Tt.exports;m()(Tt,{VCard:v["a"],VDialog:b["a"],VToolbar:D["a"]});var Dt={name:"Home",components:{StatusBar:Q,TestList:vt,TestOutputDialog:_t},data:function(){return{selectedTests:[],displayedOutput:null,isOutputDisplayed:!1}},computed:Object(r["a"])(Object(r["a"])(Object(r["a"])({},Object(l["c"])("agent",["tests"])),Object(l["b"])("agent",["testMetrics","testModules"])),{},{selectedTestsCounter:function(){return this.selectedTests.length}}),methods:{selectTest:function(t){this.selectedTests.includes(t)||this.selectedTests.push(t)},runSelectedTests:function(){var t=this;this.$store.dispatch("agent/runTests",this.selectedTests).then((function(){return t.deselectAll()}))},selectAll:function(){var t,e=Object(P["a"])(this.tests);try{for(e.s();!(t=e.n()).done;){var n=t.value;this.selectTest(n.fullname)}}catch(s){e.e(s)}finally{e.f()}},selectFailed:function(){var t,e=Object(P["a"])(this.tests);try{for(e.s();!(t=e.n()).done;){var n=t.value;"failed"===n.status&&this.selectTest(n.fullname)}}catch(s){e.e(s)}finally{e.f()}},deselectAll:function(){this.selectedTests=[]},refreshResults:function(){this.$store.dispatch("agent/refreshTestResults")},dismissResults:function(){this.$store.dispatch("agent/collectTests")},showTestOutput:function(t){var e=this;this.$store.dispatch("agent/getTestOutput",t).then((function(t){e.displayedOutput=t,e.isOutputDisplayed=!0}))}}},Ot=Dt,kt=(n("26de"),n("a523")),wt=Object(p["a"])(Ot,I,$,!1,null,"1766bc14",null),At=wt.exports;m()(wt,{VContainer:kt["a"],VIcon:y["a"],VSpacer:M["a"],VTextField:_["a"]}),s["a"].use(U["a"]);var Rt=[{path:"/",name:"Home",component:At}],jt=new U["a"]({mode:"history",base:"/ui/",routes:Rt}),St=jt,Vt=n("f309");s["a"].use(Vt["a"]);var Mt=new Vt["a"]({}),Ct=n("1da1"),Lt=(n("96cf"),n("d81d"),n("07ac"),n("e9c4"),n("bc3a")),Ut=n.n(Lt),It=1e3,$t=5*It,Pt=Ut.a.create();function Et(){var t;try{if(t=JSON.parse(localStorage.getItem("agentURLs")),!t)return console.log("No agents reloaded"),[]}catch(e){return console.log("No agents reloaded"),[]}return console.log("agents reloaded",t),t}function Bt(t){var e,n={total:0},s=Object(P["a"])(t);try{for(s.s();!(e=s.n()).done;){var a=e.value;n[a.status]||(n[a.status]=0),n[a.status]+=1,n.total+=1}}catch(i){s.e(i)}finally{s.f()}return n}function Nt(t){var e=Bt(t),n=[];return e.failed>0?n.push("failed"):e.succeed===e.total&&n.push("succeed"),e.running>0?n.push("running"):e.pending>0&&n.push("pending"),0===n.length&&n.push("n/a"),n}var Ft={namespaced:!0,state:{selectedAgent:null,agentURLs:Et(),tests:[]},getters:{agentURLs:function(t){return t.agentURLs},isConnected:function(t){return!!t.selectedAgent},testMetrics:function(t){return Bt(t.tests)},testModules:function(t){var e={};console.log(t.tests);var n,s=Object(P["a"])(t.tests);try{for(s.s();!(n=s.n()).done;){var a=n.value;a.modulename in e||(e[a.modulename]={modulename:a.modulename,tests:[]}),e[a.modulename].tests.push(a)}}catch(i){s.e(i)}finally{s.f()}return Object.values(e).map((function(t){return t.statuses=Nt(t.tests)})),e}},mutations:{addAgent:function(t,e){t.agentURLs.push(e),console.log(t.agentURLs.map((function(t){return t}))),localStorage.setItem("agentURLs",JSON.stringify(t.agentURLs))},useAgent:function(t,e){t.selectedAgent=e,Pt.defaults.baseURL=e,t.tests=[]},setTests:function(t,e){t.tests=e}},actions:{setTests:function(t,e){var n=t.commit,s=t.dispatch;n("setTests",e);var a,i=!1,r=Object(P["a"])(e);try{for(r.s();!(a=r.n()).done;){var c=a.value;if("pending"===c.status||"running"===c.status){i=!0,console.log("triggering refresh, culprit:",c);break}}}catch(o){r.e(o)}finally{r.f()}i&&setTimeout((function(){return s("refreshTestResults")}),$t)},refreshTestResults:function(t){return Object(Ct["a"])(regeneratorRuntime.mark((function e(){var n,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.dispatch,e.next=3,Pt.get("/tests/summary");case 3:s=e.sent,n("setTests",s.data);case 5:case"end":return e.stop()}}),e)})))()},addAgent:function(t,e){return Object(Ct["a"])(regeneratorRuntime.mark((function n(){var s,a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return s=t.commit,a=t.dispatch,s("addAgent",e),n.next=4,a("useAgent",e);case 4:case"end":return n.stop()}}),n)})))()},useAgent:function(t,e){return Object(Ct["a"])(regeneratorRuntime.mark((function n(){var s,a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(s=t.commit,a=t.dispatch,s("useAgent",e),!e){n.next=5;break}return n.next=5,a("refreshTestResults");case 5:case"end":return n.stop()}}),n)})))()},runTests:function(t,e){return Object(Ct["a"])(regeneratorRuntime.mark((function n(){var s,a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return s=t.dispatch,n.next=3,Pt.post("/tests/run",e);case 3:a=n.sent,s("setTests",a.data);case 5:case"end":return n.stop()}}),n)})))()},collectTests:function(t){return Object(Ct["a"])(regeneratorRuntime.mark((function e(){var n,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.dispatch,e.next=3,Pt.post("/tests/collect");case 3:s=e.sent,n("setTests",s.data);case 5:case"end":return e.stop()}}),e)})))()},getTestOutput:function(t,e){return Object(Ct["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Pt.get("/tests/output/".concat(e));case 2:return n=t.sent,t.abrupt("return",n.data);case 4:case"end":return t.stop()}}),t)})))()}}};s["a"].use(l["a"]);var Ht=new l["a"].Store({modules:{agent:Ft}});s["a"].config.productionTip=!1,new s["a"]({router:St,vuetify:Mt,store:Ht,render:function(t){return t(L)}}).$mount("#app")},"5b5c":function(t,e,n){},"5e67":function(t,e,n){"use strict";n("8809")},"65e8":function(t,e,n){"use strict";n("c17f")},8809:function(t,e,n){},c17f:function(t,e,n){},cf05:function(t,e,n){t.exports=n.p+"img/logo.c0a818de.png"}});
//# sourceMappingURL=app.62da3902.js.map